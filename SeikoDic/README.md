# 零.引言

- 本词库大部分和**SQ系**写法类似。Seiko力求0成本迁移你之前的伪代码  
  同时引入新的变量词库等来完善写法。
- 本伪代码模块仍处于初级阶段。如有需求请火速issue

# 一.导入

- 将你的伪代码文件移入`/sdcard/Android/data/com.kagg886.seiko/dic`中
- 前往词库页面，下拉刷新

# 二.编写工具

推荐MT管理器，当然其他的随便。萝卜白菜，各有所好

# 三.伪代码的基本格式:(以后会改)

一份Seiko伪代码文档由若干指令构成，其中一份指令领导着若干伪代码。

## 指令

指令由两部分构成:  
`[事件匹配字符串]正则表达式`  
前面的"事件匹配字符串"指的是此指令需要匹配的事件
而后面的正则表达式则是我们的指令

> 当消息被SeikoDIC接收时，SeikoDIC会先筛选事件类型与其相匹配的词条，然后将消息内容与正则表达式一个一个进行匹配操作。  
> 若以上操作匹配到词条了，则抽出对应的伪代码开始操作  
> 例如:`[群]早上好`可以匹配每一个在群内发送早上好的人  
> **以下是事件匹配字符串的列表(以后会补充)**

| 事件匹配字符串 | 详情       | 补充  |
|---------|----------|-----|
| 群       | 代表一个群消息  | 无   |
| 好友      | 代表一个好友消息 | 无   |

> [你可以在这里找到内建事件匹配的所有字符串和他们对应的Mirai事件](src/main/java/com/kagg886/seiko/dic/entity/DictionaryCommandMatcher.java)

## 纯文本(目前伪代码只能发送纯文本)

在指令后一定会出现一个纯文本，不然伪代码不会发送任何消息  
直接写入你想发送的消息即可。例如：

```text
[群]早上好
欧尼酱早上好~\n
今天是星期日~
```

如上伪代码被加载后，当群里的一个人发送早上好时，bot将会发送第二行和第三行信息。_(以后详细信息会省略。以此精简文档体积)_
> 我们约定使用\n来作为伪代码的换行符。当此符号出现时，将会换一行再输出。

## 变量(暂时不提供如何写入变量和读取自定义变量)

变量使用`%变量名%`来访问。在纯文本中，带有%变量名%的字样会被伪代码引擎替换成别的字符。例如:

```text
[群]我的QQ
您的QQ是:%QQ%
```

如上伪代码被**我**加载后发送的是`你的QQ:485184047`  
词库执行过程中内置了一些变量。具体得看是这个指令隶属于哪个事件。
以群事件为例，下表是内置的变量列表：

| 变量名 | 类型                       | 作用                  |   备注   |
|-----|--------------------------|---------------------|:------:|
| 上下文 | JavaObject(MessageEvent) | 获得当前的消息包对象          | 暂时不要使用 |
| 群号  | 数字                       | 获得发送此消息的群号          |   无    |
| 群名称 | 字符串                      | 获得发送此消息的群名称         |   无    |
| QQ  | 数字                       | 获得发送此消息的QQ号         |   无    |
| 昵称  | 字符串                      | 获得发送此消息的QQ昵称        |   无    |
| 群名片 | 字符串                      | 获得发送此消息的QQ在这个群里的群名片 |   无    |
| BOT | 数字                       | 接收到此消息的bot的QQ号      |   无    |

> [你可以在这里找到群消息的内建变量，在父文件夹内你可以找到其他事件都会内置什么变量进去](src/main/java/com/kagg886/seiko/dic/session/impl/GroupMessageRuntime.java)

## 计算

SeikoDIC支持算数，但是你要为它们套上方括号**必须是英文半角！**

```text
[群]计算
5+3=[5+3]\n
114+514=[114+514]
```

如上伪代码被加载后，输出结果是`5+3=8...(后略)`  
如果不套方括号，则只会输出`5+3=5+3...(后略)`

## 条件表达式

SeikoDIC支持条件表达式，以下伪代码展示了如何使用它：

```text
[群]早上好
早上好鸭~
如果:%QQ%==485184047
今天又是美好的一天呢
返回
如果尾
要不要贴贴——
```

`如果`会匹配它冒号后的表达式，若为true则执行返回前的伪代码。  
若为false则跳转到`如果尾`后，若全文都无如果尾则终止此词条的执行。  
**值得一提的是：在遇到`如果`时，会将此行伪代码前存储的所有字符串全部打包发送。因此在上面的运行结果中，你会看到两条信息**

